<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ page.title }} — {{ site.title }}</title>

    <link rel="stylesheet" href="/css/blog.css" />
    <link rel="stylesheet" href="/css/projects.css" />

    {% include mathjax.html %}
  </head>

  <body class="projects-page">
    {% include nav.html %}

    <main class="projects-wrap">
      <header class="projects-hero">
        <div class="hero-kicker">PORTFOLIO</div>
        <h1 class="hero-title">{{ page.title | default: "Projects" }}</h1>
        <p class="hero-subtitle">
          A curated list of missions, simulations, and tools. Minimal, documented, and continuously improved.
        </p>
        <div class="hero-rule"></div>
      </header>

      {% assign featured = site.data.projects | where: "featured", true %}
      {% if featured and featured.size > 0 %}
      <section class="projects-section">
        <div class="section-head">
          <div class="section-title">Featured missions</div>
          <div class="section-meta">hand-picked</div>
        </div>

        <div class="featured-grid">
          {% for p in featured %}
          <article class="card card-featured">
            <div class="card-top">
              <div class="meta">
                <span class="pill">{{ p.status }}</span>
                <span class="dot">•</span>
                <span class="meta-text">{{ p.year }}</span>
                <span class="dot">•</span>
                <span class="meta-text">{{ p.category }}</span>
              </div>
              <h2 class="card-title">{{ p.title }}</h2>
              {% if p.role %}
              <div class="card-role">{{ p.role }}</div>
              {% endif %}
            </div>

            {% if p.image %}
            <div class="thumb">
              <img src="{{ p.image }}" alt="{{ p.title }} thumbnail" loading="lazy" />
            </div>
            {% endif %}

            <p class="card-summary">{{ p.summary }}</p>

            {% if p.tags %}
            <div class="chips">
              {% for t in p.tags %}
                <span class="chip">{{ t }}</span>
              {% endfor %}
            </div>
            {% endif %}

            {% if p.links %}
            <div class="card-links">
              {% for l in p.links %}
                <a class="link" href="{{ l.url }}">{{ l.label }}</a>
              {% endfor %}
            </div>
            {% endif %}
          </article>
          {% endfor %}
        </div>
      </section>
      {% endif %}

      <section class="projects-section">
        <div class="section-head">
          <div class="section-title">All projects</div>
          <div class="section-meta">{{ site.data.projects | size }}</div>
        </div>

        <div class="cards-grid">
          {% for p in site.data.projects %}
          <article class="card">
            <div class="card-top">
              <div class="meta">
                <span class="pill">{{ p.status }}</span>
                <span class="dot">•</span>
                <span class="meta-text">{{ p.year }}</span>
                <span class="dot">•</span>
                <span class="meta-text">{{ p.category }}</span>
              </div>
              <h2 class="card-title">{{ p.title }}</h2>
              {% if p.role %}
              <div class="card-role">{{ p.role }}</div>
              {% endif %}
            </div>

            <p class="card-summary">{{ p.summary }}</p>

            {% if p.tags %}
            <div class="chips">
              {% for t in p.tags %}
                <span class="chip">{{ t }}</span>
              {% endfor %}
            </div>
            {% endif %}

            {% if p.links %}
            <div class="card-links">
              {% for l in p.links %}
                <a class="link" href="{{ l.url }}">{{ l.label }}</a>
              {% endfor %}
            </div>
            {% endif %}
          </article>
          {% endfor %}
        </div>
      </section>

      <footer class="projects-footer">
        <div class="footer-rule"></div>
        <div class="footer-text">Last updated: {{ "now" | date: "%Y-%m-%d" }}</div>
      </footer>
    </main>
  </body>
</html>
